# greedy
# 28177 ./predictions/avid-rain-560_exp4_rassp/NIST/1727959179_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/apricot-frost-534_exp2_log_39_1.2/NIST/1728026101_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/balmy-violet-577_custom_final/NIST/1730720158_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/crisp-meadow-535_exp2_lin_100/NIST/1728026099_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/effortless-river-558_exp4_rassp_neims/NIST/1727959179_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/major-capybara-531_exp1_pos_emb/NIST/1727968160_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/noble-glitter-546_exp3_mf10K/NIST/1727961994_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/valiant-totem-557_exp4_neims/NIST/1727959179_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/autumn-dawn-564_exp5_one_src_token/NIST/1727883404_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/devout-disco-532_exp2_log_20_1.43/NIST/1728026100_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/absurd-wildflower-536_exp2_lin_1000/NIST/1728026100_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/hearty-leaf-572_exp7_custom_rassp/NIST/1730370944_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/hopeful-rain-557_exp4_rassp_neims_nist/NIST/1727883450_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/exalted-elevator-545_exp3_mf10/NIST/1727961994_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/devoted-feather-548_exp3_selfies/NIST/1727966508_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/hardy-bush-576_exp5_custom_one_src_token/NIST/1730720159_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/jolly-lion-562_exp6_45perc_frozen/NIST/1728025474_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/valiant-galaxy-574_exp7_custom_rassp_neims_nist/NIST/1730370944_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/dulcet-cloud-568_exp7_custom_neims/NIST/1730370944_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/smooth-totem-563_exp6_72perc_frozen/NIST/1728025473_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/fresh-haze-530_exp1_int_emb_exp2_log_9_2.2/NIST/1728026100_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/likely-sea-573_exp7_custom_rassp_neims/NIST/1730370944_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/fearless-wildflower-490_rassp1_neims1_224kPretrain_148k/NIST/99999_valid_full_greedy_compiled_30bin/predictions.jsonl
# 28177 ./predictions/fearless-wildflower-490_rassp1_neims1_224kPretrain_148k/NIST/1730465603_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/dashing-grass-547_exp3_mf100/NIST/1727961993_valid_full_greedy/predictions.jsonl
# 28177 ./predictions/royal-violet-583_exp2_lin_10000/NIST/1733919330_valid_full_greedy/predictions.jsonl
# beam 10
# 28177 ./predictions/avid-rain-560_exp4_rassp/NIST/1728253265_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/apricot-frost-534_exp2_log_39_1.2/NIST/1728252914_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/balmy-violet-577_custom_final/NIST/1730720159_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/crisp-meadow-535_exp2_lin_100/NIST/1728252914_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/effortless-river-558_exp4_rassp_neims/NIST/1728253269_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/major-capybara-531_exp1_pos_emb/NIST/1728252823_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/noble-glitter-546_exp3_mf10K/NIST/1728252982_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/valiant-totem-557_exp4_neims/NIST/1728253269_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/devout-disco-532_exp2_log_20_1.43/NIST/1728252914_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/absurd-wildflower-536_exp2_lin_1000/NIST/1728252914_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/hearty-leaf-572_exp7_custom_rassp/NIST/1730370869_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/hopeful-rain-557_exp4_rassp_neims_nist/NIST/1730371971_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/exalted-elevator-545_exp3_mf10/NIST/1728252984_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/devoted-feather-548_exp3_selfies/NIST/1728252984_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/hardy-bush-576_exp5_custom_one_src_token/NIST/1730720159_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/jolly-lion-562_exp6_45perc_frozen/NIST/1728294009_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/valiant-galaxy-574_exp7_custom_rassp_neims_nist/NIST/1730370869_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/dulcet-cloud-568_exp7_custom_neims/NIST/1730370869_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/smooth-totem-563_exp6_72perc_frozen/NIST/1728294008_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/fresh-haze-530_exp1_int_emb_exp2_log_9_2.2/NIST/1728252914_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/likely-sea-573_exp7_custom_rassp_neims/NIST/1730370869_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/fearless-wildflower-490_rassp1_neims1_224kPretrain_148k/NIST/99999_valid_full_beam10_compiled_30bin/predictions.jsonl
# 28177 ./predictions/fearless-wildflower-490_rassp1_neims1_224kPretrain_148k/NIST/1730465603_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/dashing-grass-547_exp3_mf100/NIST/1728252982_valid_full_beam10/predictions.jsonl
# 28177 ./predictions/gallant-lion-533_exp2_log_29_1.28_exp3_mf10M/NIST/1728252982_valid_full_beam10/predictions.jsonl


PREDICTIONS_valid=(./predictions/royal-violet-583_exp2_lin_10000/NIST/1733919330_valid_full_greedy/predictions.jsonl \
             ./predictions/royal-violet-583_exp2_lin_10000/NIST/1733919330_valid_full_beam10/predictions.jsonl \
            ./predictions/sleek-cloud-581_9M_448+296k/NIST/1733919330_valid_full_beam10/predictions.jsonl \
            ./predictions/sleek-cloud-581_9M_448+296k/NIST/1733919330_valid_full_greedy/predictions.jsonl
)

PREDICTIONS_test=(./predictions/sleek-cloud-581_9M_448+296k/NIST/1733919330_test_full_beam10/predictions.jsonl       \
            ./predictions/sleek-cloud-581_9M_448+296k/NIST/1733919330_test_full_greedy/predictions.jsonl
)

# Correct for loop with proper array reference
for prediction in "${PREDICTIONS_valid[@]}" ; do
    echo "Processing prediction: $prediction `wc -l $prediction`"
    python ../evaluate_predictions.py --predictions-path $prediction \
                                    --labels-path data/nist/valid.jsonl \
                                    --config-file configs/evaluate.yaml &
done

for prediction in "${PREDICTIONS_test[@]}" ; do
    echo "Processing prediction: $prediction `wc -l $prediction`"
    python ../evaluate_predictions.py --predictions-path $prediction \
                                        --labels-path data/nist/test.jsonl \
                                        --config-file configs/evaluate.yaml &
done









# Optional: Wait for all background processes to finish
wait